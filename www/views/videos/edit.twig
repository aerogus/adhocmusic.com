{{ include('common/header.twig') }}

<div class="container">

  <div class="row">
  <div class="col-md-8 mx-auto">

  <h2 class="px-2 py-1 mb-0 bg-dark text-white rounded-top">√âditer une vid√©o</h2>
  <div class="border rounded-bottom bg-white p-3">

{% if unknown_video %}

<p class="alert alert-danger">Cette vid√©o est introuvable !</p>

{% else %}

<form id="form-video-edit" name="form-video-edit" method="post" action="/videos/edit">

  <div class="row mb-3">
    <label class="form-label col-3" for="name">Titre (*)</label>
    <div class="col-9">
      <div class="alert alert-danger" id="error_name"{% if not error_name %} style="display: none"{% endif %}>Vous devez saisir un titre pour la vid√©o</div>
      <input type="text" id="name" name="name" class="form-control" value="{{ video.name }}">
    </div>
  </div>

  <div class="row mb-3">
    <label class="form-label col-3" for="host">H√©bergeur</label>
    <div class="col-9">
      <span id="host">{{ video.host.name }}</span>
    </div>
  </div>

  <div class="row mb-3">
    <label class="form-label col-3" for="reference">R√©f√©rence</label>
    <div class="col-9">
      <span id="reference">{{ video.reference }}</span>
    </div>
  </div>

  <div class="row mb-3">
    <label class="form-label col-3" for="player">Visualiser</label>
    <div class="col-9">
      {{ video.player|raw }}
    </div>
  </div>

  <div class="row mb-3">
    <label class="form-label col-3" for="thumbnail">Miniature</label>
    <div class="col-9">
      <img src="{{ video.thumbUrl(320) }}" alt=""/>
    </div>
  </div>

  <div class="row mb-3">
    <label class="form-label col-3" for="thumbnail_fetch">R√©importer la miniature</label>
    <div class="col-9">
      <input class="checkbox" type="checkbox" id="thumbnail_fetch" name="thumbnail_fetch"/>
    </div>
  </div>

  <div class="row mb-3">
    <label class="form-label col-3" for="ids_groupe[0]">Groupe(s)</label>
    <div class="col-9">
      {% if groupe %}
        <input type="hidden" name="id_groupe" value="{{ groupe.id }}">
        <span>{{ groupe.name }}</span>
      {% else %}
        <div class="alert alert-danger" id="error_id_groupe"{% if not error_id_groupe %} style="display: none"{% endif %}>Vous devez lier cette vid√©o √† soit un groupe, soit un lieu, soit un √©v√©nement</div>
        <select id="ids_groupe[{{ smarty.section.cpt_groupe.index }}]" name="ids_groupe[{{ smarty.section.cpt_groupe.index }}]" class="form-control">
          <option value="">-- Choix d'un groupe --</option>
          {% for groupe in groupes %}
          <option value="{{ groupe.idGroupe }}"{% if (index == 0) and groupe.idGroupe == id_groupe %} selected="selected"{% endif %}>{{ groupe.name }}</option>
          {% endfor %}
        </select>
      {% endif %}
    </div>
  </div>

  <div class="row mb-3">
    <label class="form-label col-3" for="id_lieu">Lieu</label>
    <div class="col-9">
      {% if lieu %}
      <input type="hidden" name="id_lieu" value="{{ lieu.id }}">
      <span>{{ lieu.name }}</span>
      {% else %}
      <select id="id_lieu" name="id_lieu" class="form-control">
        <optgroup label="Autre">
          <option value="0">aucun / non r√©f√©renc√©</option>
        </optgroup>
        {% for dep in deps %}
        <optgroup label="{{ dep.idDepartement }} - {{ dep.name }}">
          {% for lieu in lieux[dep.idDepartement] %}
          <option value="{{ lieu.idDepartement }}">{{ lieu.city.cp }} {{ lieu.city.name }} : {{ lieu.name }}</option>
          {% endfor %}
        </optgroup>
        {% endfor %}
      </select>
      {% endif %}
    </div>
  </div>

  <div class="row mb-3">
    <label class="col-3 form-label" for="id_event">Ev√©nement</label>
    <div class="col-9">
      {% if event %}
      <input type="hidden" name="id_event" value="{{ event.id }}">
      <span >{{ event.date }} - {{ event.name }}</span>
      {% else %}
      <select id="id_event" name="id_event" class="form-control">
        <option value="0">Veuillez s√©lectionner un lieu</option>
      </select>
      {% endif %}
    </div>
  </div>

  <div class="row mb-3">
    <label class="col-3 form-check-label" for="online">Rendre public</label>
    <div class="col-9">
      <input class="form-check-input" type="checkbox" name="online" {% if video.online %} checked="checked"{% endif %}>
    </div>
  </div>

  <div class="row mb-3">
    <div class="offset-3">
      <input id="form-video-edit-submit" name="form-video-edit-submit" class="btn btn-primary" type="submit" value="üíæ Enregistrer">
      <input type="hidden" name="id" value="{{ video.id }}">
      <input type="hidden" name="video_id_event" id="video_id_event" value="{{ video.idEvent }}">
    </div>
  </div>

  <div class="row mb-3">
    <div class="offset-3">
      <a href="/videos/delete/{{ video.id }}" class="btn btn-primary">‚ùå Supprimer</a>
    </div>
  </div>

</form>

{% endif %} {# test unknown video #}

  </div>
  </div>
  </div>
</div>

{{ include('common/footer.twig') }}
